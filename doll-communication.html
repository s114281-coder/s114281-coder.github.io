<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åæ‡‰æŒ‘æˆ°ï¼šäº”åˆ†åˆ¶èˆ‡å€’æ‰£æ©Ÿåˆ¶</title>
    <style>
        /* -------------------- CSS æ¨£å¼ -------------------- */
        
        body {
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 30px;
            background-color: #fce4ec; /* æ·ºç²‰è‰²èƒŒæ™¯ */
            user-select: none; /* é˜²æ­¢å¿«é€Ÿé»æ“Šæ™‚é¸å–åˆ°æ–‡å­— */
        }

        #game-area {
            position: relative;
            width: 600px;
            height: 450px;
            border: 5px solid #d81b60;
            background-color: #ffffff;
            overflow: hidden;
            cursor: crosshair;
            margin-bottom: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        /* éŠæˆ²ç‰©é«” (å¯ä»¥æ˜¯åœ–ç‰‡æˆ–åœ“å½¢) */
        #target-object {
            position: absolute;
            width: 60px; /* é€™è£¡èª¿æ•´ç‰©é«”å¯¬åº¦ */
            height: 60px; /* é€™è£¡èª¿æ•´ç‰©é«”é«˜åº¦ */
            cursor: pointer;
            z-index: 10;
            display: none;
            /* å¦‚æœæ‚¨æ²’æœ‰åœ–ç‰‡ï¼Œé€™è¡Œæœƒé¡¯ç¤ºä¸€å€‹æš«æ™‚çš„åœ“å½¢ */
            background-color: #ff4081;
            border-radius: 50%;
        }

        #info {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: #880e4f;
            font-weight: bold;
        }

        #start-button {
            padding: 12px 30px;
            font-size: 1.2em;
            cursor: pointer;
            background-color: #d81b60;
            color: white;
            border: none;
            border-radius: 25px;
            margin-bottom: 10px;
        }

        #start-button:disabled {
            background-color: #bdbdbd;
            cursor: not-allowed;
        }

        #win-message {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            color: #ffeb3b;
            font-size: 3em;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            display: none;
            z-index: 100;
        }

        /* å€’æ‰£ç‰¹æ•ˆæç¤º */
        .minus-point {
            position: absolute;
            color: red;
            font-weight: bold;
            font-size: 1.5em;
            animation: fadeUp 0.5s forwards;
            pointer-events: none;
        }

        @keyframes fadeUp {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-30px); }
        }
    </style>
</head>
<body>

    <h1>ğŸ¯ ç²¾æº–é»æ“ŠæŒ‘æˆ°</h1>

    <div id="info">åˆ†æ•¸ï¼š<span id="score">0</span> / 5</div>
    
    <button id="start-button">é–‹å§‹éŠæˆ²</button>

    <div id="game-area">
        <div id="target-object"></div>

        <div id="win-message">
            æ­å–œç²å‹ï¼ğŸ†
            <button onclick="window.location.reload()" style="margin-top:20px; padding:10px 20px; font-size: 0.4em;">é‡æ–°æŒ‘æˆ°</button>
        </div>
    </div>

    <p>æç¤ºï¼šé»æ“ŠèƒŒæ™¯æœƒæ‰£åˆ†å–”ï¼</p>

    <script>
        /* -------------------- JavaScript é‚è¼¯ -------------------- */

        const GAME_AREA = document.getElementById('game-area');
        const TARGET = document.getElementById('target-object');
        const SCORE_DISPLAY = document.getElementById('score');
        const START_BUTTON = document.getElementById('start-button');
        const WIN_MESSAGE = document.getElementById('win-message');
        
        const WIN_SCORE = 5;
        let score = 0;
        let intervalId;
        let isGameRunning = false;

        // 1. ç§»å‹•ç‰©é«”çš„å‡½å¼
        function moveTarget() {
            const maxX = GAME_AREA.clientWidth - TARGET.offsetWidth;
            const maxY = GAME_AREA.clientHeight - TARGET.offsetHeight;

            const randomX = Math.floor(Math.random() * maxX);
            const randomY = Math.floor(Math.random() * maxY);

            TARGET.style.left = `${randomX}px`;
            TARGET.style.top = `${randomY}px`;
        }

        // 2. é»æ“Šç‰©é«” (å¾—åˆ†)
        TARGET.addEventListener('click', (event) => {
            event.stopPropagation(); // â— é‡è¦ï¼šé˜²æ­¢é»æ“Šäº‹ä»¶å‚³éçµ¦èƒŒæ™¯å°è‡´æ‰£åˆ†
            
            if (!isGameRunning) return;

            score++;
            updateScore();
            moveTarget(); // é»ä¸­å¾Œç«‹å³æ›ä½ç½®
        });

        // 3. é»æ“ŠèƒŒæ™¯ (å€’æ‰£)
        GAME_AREA.addEventListener('click', (event) => {
            if (!isGameRunning) return;

            // åªæœ‰åœ¨åˆ†æ•¸å¤§æ–¼ 0 æ™‚æ‰æ‰£åˆ†
            if (score > 0) {
                score--;
                updateScore();
                showMinusEffect(event.clientX, event.clientY);
            }
        });

        // 4. æ›´æ–°åˆ†æ•¸èˆ‡æª¢æŸ¥å‹åˆ©
        function updateScore() {
            SCORE_DISPLAY.textContent = score;
            if (score >= WIN_SCORE) {
                endGame();
            }
        }

        // 5. é¡¯ç¤ºå€’æ‰£å°ç‰¹æ•ˆ
        function showMinusEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'minus-point';
            effect.textContent = '-1';
            effect.style.left = `${x - GAME_AREA.getBoundingClientRect().left}px`;
            effect.style.top = `${y - GAME_AREA.getBoundingClientRect().top}px`;
            GAME_AREA.appendChild(effect);
            setTimeout(() => effect.remove(), 500);
        }

        // 6. é–‹å§‹éŠæˆ²
        START_BUTTON.addEventListener('click', () => {
            score = 0;
            updateScore();
            isGameRunning = true;
            START_BUTTON.disabled = true;
            START_BUTTON.textContent = "åŠ æ²¹ï¼";
            TARGET.style.display = 'block';
            moveTarget();
            
            // æ¯ 1.2 ç§’è‡ªå‹•è·³å‹•ä¸€æ¬¡ (æ‚¨å¯ä»¥ç¸®çŸ­æ™‚é–“å¢åŠ é›£åº¦)
            intervalId = setInterval(moveTarget, 1200);
        });

        // 7. çµæŸéŠæˆ²
        function endGame() {
            isGameRunning = false;
            clearInterval(intervalId);
            TARGET.style.display = 'none';
            WIN_MESSAGE.style.display = 'flex';
        }

    </script>
</body>
</html>
