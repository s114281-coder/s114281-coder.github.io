<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>ä¸ƒåˆ†æ¥µé™æŒ‘æˆ°è³½</title>
    <style>
        /* åŸºç¤è¨­å®š */
        body { 
            background-color: #0f172a; color: #f8fafc; 
            font-family: "Microsoft JhengHei", sans-serif;
            text-align: center; margin: 0; padding: 20px;
            user-select: none;
        }

        /* æ¨™é¡Œèˆ‡å®¹å™¨ */
        h1 { color: #38bdf8; font-size: 2.5em; text-shadow: 0 0 10px rgba(56, 189, 248, 0.5); }
        .container { 
            max-width: 600px; margin: 0 auto; 
            padding: 20px; border: 2px solid #334155; border-radius: 15px;
            background: #1e293b;
        }

        /* è§’è‰²æŒ‰éˆ• */
        .btn-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin: 20px 0; }
        .role-btn {
            background: #334155; border: 2px solid #475569; border-radius: 12px;
            padding: 20px 5px; cursor: pointer; color: white; transition: 0.2s;
        }
        .role-btn:hover { border-color: #38bdf8; background: #1e293b; transform: scale(1.05); }
        .dot { width: 40px; height: 40px; border-radius: 50%; margin: 0 auto 10px; }

        /* éŠæˆ²èˆå° */
        #stage {
            width: 90vw; height: 50vh; max-width: 800px; margin: 20px auto;
            background: #020617; border: 3px solid #38bdf8; border-radius: 10px;
            position: relative; display: none; overflow: hidden;
        }
        #target {
            width: 80px; height: 80px; border-radius: 50%;
            position: absolute; cursor: pointer; display: none;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        /* åŠŸèƒ½æŒ‰éˆ• */
        .btn-main {
            padding: 15px 30px; font-size: 1.2em; margin: 10px;
            border: none; border-radius: 50px; cursor: pointer; font-weight: bold;
        }
        .b-green { background: #22c55e; color: white; }
        .b-yellow { background: #eab308; color: white; }
        .b-red { background: #ef4444; color: white; }
    </style>
</head>
<body>

    <h1>ä¸ƒåˆ†æ¥µé™æŒ‘æˆ°è³½</h1>

    <div id="step1" class="container">
        <p>ğŸ§¸ è«‹é¸æ“‡ä½ çš„åƒè³½è§’è‰²ï¼š</p>
        <div class="btn-grid">
            <button class="role-btn" onclick="goStep2('gold')">
                <div class="dot" style="background: gold;"></div>
                é»ƒé‡‘
            </button>
            <button class="role-btn" onclick="goStep2('cyan')">
                <div class="dot" style="background: cyan;"></div>
                é’è—
            </button>
            <button class="role-btn" onclick="goStep2('magenta')">
                <div class="dot" style="background: magenta;"></div>
                æ¡ƒç´…
            </button>
        </div>
    </div>

    <div id="step2" class="container" style="display:none;">
        <p>âš¡ é¸æ“‡æŒ‘æˆ°é›£åº¦ï¼š</p>
        <button class="btn-main b-green" onclick="playGame(40, 1500)">ç°¡å–® (40s)</button>
        <button class="btn-main b-yellow" onclick="playGame(45, 1000)">ä¸­ç­‰ (45s)</button>
        <button class="btn-main b-red" onclick="playGame(50, 700)">å›°é›£ (50s)</button>
        <br>
        <button style="background:none; color:#64748b; border:none; cursor:pointer;" onclick="location.reload()">â† é‡é¸è§’è‰²</button>
    </div>

    <div id="game-ui" style="display:none;">
        <h2 style="color:#38bdf8;">
            å‰©é¤˜æ™‚é–“: <span id="time-left">0</span>s | 
            ç›®å‰åˆ†æ•¸: <span id="score-val">0</span>/7
        </h2>
        <div id="stage">
            <div id="target"></div>
        </div>
        <button class="btn-main" style="background:#475569; color:white;" onclick="location.reload()">æ”¾æ£„æ¯”è³½</button>
    </div>

    <script>
        let charColor = "";
        let currentScore = 0;
        let gameTime = 0;
        let isRunning = false;
        let moveTimer;

        // è·³è½‰åˆ°é›£åº¦é¸æ“‡
        function goStep2(color) {
            charColor = color;
            document.getElementById('step1').style.display = 'none';
            document.getElementById('step2').style.display = 'block';
        }

        // é–‹å§‹æ¯”è³½
        function playGame(sec, speed) {
            gameTime = sec;
            currentScore = 0;
            isRunning = true;

            document.getElementById('step2').style.display = 'none';
            document.getElementById('game-ui').style.display = 'block';
            document.getElementById('stage').style.display = 'block';

            const ball = document.getElementById('target');
            ball.style.backgroundColor = charColor;
            ball.style.display = 'block';

            // å€’æ•¸è¨ˆæ™‚é‚è¼¯
            const countdown = setInterval(() => {
                gameTime--;
                document.getElementById('time-left').innerText = gameTime;
                if (gameTime <= 0) {
